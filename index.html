<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beatbench Tool</title>
    <style>
        /* General styles */
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            animation: colorCycle 10s infinite;
            padding-bottom: 20px;
        }

        h1 {
            text-align: center;
            margin-top: 20px;
        }

        #uploadAndMasterBtn:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        #uploadAndMasterBtn {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }

        #result {
            text-align: center;
            margin-top: 20px;
        }

        #countdown {
            font-size: 1.5em;
            margin-top: 10px;
        }

        #downloadLink {
            display: inline;
            color: #007bff;
            text-decoration: none;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 0.8em;
        }

        .sampling-pack {
            text-align: center;
            margin-top: 20px;
        }

        .sampling-pack a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }

        @keyframes colorCycle {
            0% { background-color: #1e3a8a; }
            25% { background-color: #4b5563; }
            50% { background-color: #2563eb; }
            75% { background-color: #9333ea; }
            100% { background-color: #1e3a8a; }
        }

        #popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            color: #000;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
        }

        #popup p {
            font-size: 1.2em;
        }

        #popup button {
            background-color: #28a745;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }

        #popup h3 {
            margin-bottom: 10px;
        }

        #popup-timer {
            font-size: 1.5em;
            margin-top: 10px;
        }

        /* Ad styles */
        .ad-container {
            text-align: center;
            margin-top: 20px;
            max-height: 90px; /* Limit the ad height */
            overflow: hidden; /* Hide any overflowing content */
        }

        /* About section styles */
        #about {
            text-align: center;
            margin-top: 40px;
        }

        #about h2 {
            margin-bottom: 20px;
        }

        #about p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>
        <img src="bb.png" alt="Beatbench Logo" width="100" height="100" style="display: block; margin: 0 auto;">
        Beatbench Tool
    </h1>
    <p style="text-align: center;">Reminder: AI function is 60% operational and will be fully operational soon.</p>

    <!-- AdSense Ad Unit -->
    <div class="ad-container">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-5981445960827471"
             data-ad-slot="1705800739"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <input type="file" id="upload" accept=".mp3">
    <select id="genreSelect">
        <option value="pop">Pop</option>
        <option value="rock">Rock</option>
        <option value="hiphop">Hip Hop</option>
    </select>
    <button id="chooseGenreBtn" onclick="chooseGenre()">Choose Genre</button>
    <button id="uploadAndMasterBtn" onclick="uploadAndMaster()" disabled>AI Master</button>
    <div id="result" class="hidden">
        <h3>Mastered Audio</h3>
        <audio id="audioPlayer" controls></audio>
        <button onclick="downloadMasteredTrack()">Download Mastered Track</button>
        <a id="downloadLink" style="display: none;">Download</a>
        <p id="countdown">10:00</p>
    </div>

    <div class="sampling-pack">
        <h2>Sampling Packs</h2>
        <p>Explore high-quality sounds for your projects.</p>
        <p>
            <a href="#" onclick="startAdTimer('https://file.io/huPcZ1vEFmmF')">1-Drum-Hits-Punchy-kicks-crisp-4-sample-pack.zip</a>
        </p>
        <p>
            <a href="#" onclick="startAdTimer('https://file.io/HRcgxkm4YnYA')">1-Drum-Hits-Punchy-kicks-crisp-4-a52d112-sample-pack.zip</a>
        </p>
        <p>
            <a href="#" onclick="startAdTimer('https://file.io/exOL0VXSM41j')">1-Drum-Hits-Punchy-kicks-crisp-3-9b0f553-sample-pack.zip</a>
        </p>
        <p>
            <a href="#" onclick="startAdTimer('https://file.io/eBEQKxLFitWQ')">Piano-and-Keys-Soulful-jazzy-sample-pack.zip</a>
        </p>
    </div>

    <div id="about">
        <h2>About Beatbench</h2>
        <p>Beatbench is a music production tool founded by Thabang Mosoana, formerly known as Mahzbe and now Italian Gogo. After a sangoma initiation, Thabang dedicated his musical skills to supporting others in their music creation journey.</p>
        <p>All sampling packs available on Beatbench are royalty-free, ensuring you can use them in your projects without any legal concerns.</p>
        <p>In the near future, Beatbench will introduce "wraca-well revised-academy," an initiative aimed at young music creators to sharpen their skills.</p>
    </div>

    <div id="popup">
        <h3>Advertisement</h3>
        <p>Your download will be ready in <span id="popup-timer">5</span> seconds...</p>
        <button onclick="closePopup()">Close</button>
    </div>

    <!-- Footer Section -->
    <div class="footer">
        <p>Â© 2024 Beatbench. All Rights Reserved.</p>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw(1).js').then(function(registration) {
                console.log('Service Worker registered with scope:', registration.scope);
            }).catch(function(error) {
                console.log('Service Worker registration failed:', error);
            });
        }

        function chooseGenre() {
            const genre = document.getElementById('genreSelect').value;
            alert("You've selected " + genre + " genre!");
            document.getElementById('uploadAndMasterBtn').disabled = false;
        }

        function uploadAndMaster() {
            // Upload and master logic
            alert('Your track is being mastered...');
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
        }

        function downloadMasteredTrack() {
            const link = document.getElementById('downloadLink');
            link.href = '#'; // Your download link
            link.style.display = 'inline';
        }

        function startAdTimer(downloadLink) {
            // Show popup
            document.getElementById('popup').style.display = 'block';

            let countdown = 5;
            const timerElement = document.getElementById('popup-timer');

            const countdownInterval = setInterval(() => {
                countdown--;
                timerElement.textContent = countdown;

                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    // Hide popup
                    document.getElementById('popup').style.display = 'none';
                    // Trigger the download
                    initiateDownload(downloadLink);
                }
            }, 1000);
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }

        function initiateDownload(downloadLink) {
            // Trigger the download by navigating to the download link
            window.location.href = downloadLink;
            
            // Activate the service worker only when the download starts
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.ready.then(function(registration) {
                    console.log('Service Worker activated for downloading the sampling pack.');
                });
            }
        }
    </script>
</body>
</html>
